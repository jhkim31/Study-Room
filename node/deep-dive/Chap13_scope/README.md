# Chap 13 scope
JS에서 중요한 개념중 하나다.

그동안 JS 개발을 해오며 JS 코드를 보고 스코프가 어떻게 먹을지, 어떻게 동작하는지는 다 알고 있었다. 

하지만, 왜 이렇게 동작하는지에 대해 설명하라고 하면 설명 하지를 못했다. 그래서 이 책을 공부하기로 했다.

---

변수를 포함한 모든 식별자는 자신이 선언된 위치에 따라서 자신을 참조할 수 있는 유효범위가 결정되게 된다.  

## 스코프
스코프는 파일시스템과 같은 네임스페이스다. 식별자를 구분할 수 있는 범위를 나타낸다. 즉 아래와 같이
```javascript
var a = 'hello';

function A() {
    var a = 'world';
    console.log(a);
}

A();
```

a라는 식별자는, 전역 스코프와 지역 스코프에서 각각 선언되었다. 그리고 각 스코프는, 각 실별자를 구분할 수 있는 범위를 나타낸다.

전역 스코프에 있는 a 변수는 `'hello'` 라는 문자열을 가르키고, 지역 스코프에 있는 `a` 변수는  `'world'` 라는 문자열을 가르키게 된다.

## 렉시컬 환경
JS 엔진은 코드의 문맥을 고려한다. 코드 실행이 어디서 이루어지며, 주변에 어떤 코드가 있는지에 따라 동작이 결정되게 된다.

이러한 환경을 **렉시컬 환경**이라고 부른다.

## 로컬 스코프, 글로벌 스코프
단순하다. 함수 내부면 로컬 스코프, 함수 내부가 아니면 글로벌 스코프다.

## 스코프 체인
함수는 중첩되어서 정의될 수 있다 (nested function). 즉 함수가 중첩되면 스코프도 중첩되게 된다. 

이러한 중첩은 계층적인 스코프 구조를 가지게 된다.

변수를 참조할때 JS 엔진은 스코프 체인을 통해 상위 스코프를 뒤져가며 참조할 변수를 찾는다.

JS 엔진은 코드실행전 렉시컬 환경을 구성한다. 변수가 선언되면, 식별자가 이 렉시컬 환경에 등록되고, 이후 식별자의 검색도 렉시컬 환경 위에서 이뤄진다.

## 렉시컬 스코프
프로그래밍 언어에서 상위 스코프를 결정하는 방식에는 두가지가 있다.
1. 함수를 어디서 **호출**했는지
2. 함수를 어디서 **정의**했는지

JS는 두번째 방식 (정적 스코프, 렉시컬 스코프)를 따른다. 즉 함수의 상위 스코프는 함수를 정의한 스코프에 의해 결정되고, 호출위치는 아무런 영향을 주지 않는다.