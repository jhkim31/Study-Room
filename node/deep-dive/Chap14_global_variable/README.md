# Chap 14 Global Variable
글로벌 변수의 문제점과, 사용을 줄이는 방법이 대해 살펴본다.

## 변수의 생명주기
변수는 라이프 사이클에 따라 생성되고 소멸된다. 일반적으로 함수 내부에서 생성된 변수는 함수가 종료하면 소멸한다

함수의 시작과 동시에, 변수가 호이스팅되어 생성되고, 종료와 함께 메모리가 반환된다.

## 전역 변수의 생명주기
전역 코드는 별다른 함수의 호출, 진입점 없이 바로 실행된다. 이렇게 선언된 전역 변수는 글로벌 객체(window, global)의 프로퍼티가 되며 전역 객체의 생명주기가 곧 전역 변수의 생명주기인것이다.

## 전역 변수의 문제점
### 긴 생명 주기
전역 변수의 생명주기는 프로세스의 생명주기와 동일하다. 즉 프로세스가 끝날때까지 살아있게 된다. 그동안 중복된 이름의 전역 변수가 생성될 수도 있으며 이는 예상치 못한 동작을 일으키게 된다.

### 스코프 체인의 종점
[스코프 체인](../Chap13_scope) 에서 봤듯이, 스코프는 중첩되어 쌓여간다. 또한, 이 중첩 스코프에서 변수를 찾기 위해 스코프 체인을 따라 찾게 되는데 이때 전역 변수의 경우 스코프 체인의 끝에 있기 때문에 검색 속도가 상대적으로 느리게 동작한다.

## 전역 변수 줄이기
전역 변수는 되도록이면 사용을 줄여야 한다. 단 이는 절대로 사용하지 말라는것은 아니다. 전역 변수가 도움이 될때도 분명히 있다.

**나의 경우 글로벌 설정은 전역 변수로 두고, 모듈마다 세부 설정을 따로 두는 방식을 사용할때 전역 변수를 사용한다 ex) Timeout**
### 즉시 실행 함수
즉시 실행 함수를 통해 코드를 실행해 전역 네임스페이스 오염을 줄인다.

### 네임 스페이스 함수
네임 스페이스 객체를 따로 할당하여, 해당하는 전역 변수를 모아둔다.
```javascript
const JH_STD = {};
const LEE_STD = {};
JH_STD.timeout = 3000;
LEE_STD.timeout = 5000;
```

### 모듈
[notion link](https://jhkim31.notion.site/nodejs-1-523732a73bda4f4db924df51876cfd11?pvs=74)


모듈은 독립적인 네임 스페이스를 가지게 된다. NodeJS 환경에서 CJS, ESM 둘 다 파일 단위의 모듈을 지원하며, 각 모듈(파일단위)은 각각의 네임스페이스를 가지게 된다. 

`A.js` 에서 글로벌로 선언된 `timeout` 변수와 `B.js` 에서 글로벌로 선언된 `timeout` 변수는 아예 다른 네임스페이스의 변수다.







